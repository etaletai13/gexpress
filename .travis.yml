os: osx
language: node_js
node_js: '8.0.0'
before_install:
  - brew install msitools
  - brew install rpm 
  - brew install wine
script:
  - echo "Building for linux...\n" yarn build.linux && echo "OK √\nPacking for Linux..." && yarn package.linux && echo "\nOK √\n"
  - echo "Building for OSX...\n" yarn build.mac && echo "OK √\nPacking for OSX..." && yarn package.mac && echo "\nOK √\n"
  - echo "Building for Windows...\n" yarn build.win32 && echo "OK √\nPacking for Windows..." && yarn package.win32 && echo "\nOK √"
before_deploy:
  - yarn publish-release --assets Build/Releases/*.dmg,Build/Releases/*.msi,Build/Releases/*.rpm,Build/Release/*.deb --skipAssetsCheck --token ${GH_TOKEN}
deploy:
  provider: releases
  api_key: ${GH_TOKEN}
  file_glob: true
  file: 
  - "./Build/Releases/*.rpm"
  - "./Build/Releases/*.dmg"
  on:
    repo: etaletai13/MSCPlayer
    tags: true
