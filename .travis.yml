os: osx
language: node_js
node_js: '4.0.0'
before_install:
  - brew install msitools
  - brew install wine
before_deploy:
  - git add ./Build/Releases/*
  - git commit -am --amend
  - git tag 'v1.0.0'
  - yarn publish-release --assets Build/Releases/*.dmg,Build/Releases/*.msi,Build/Releases/*.rpm,Build/Release/*.deb --skipAssetsCheck --token ${GH_TOKEN}
deploy:
  provider: releases
  api_key: ${GH_TOKEN}
  skip_cleanup: true
  file_glob: true
  file:
  - "./Build/Releases/GExpress.msi"
  - "./g-express-linux-x64"
  - "./Build/Releases/GExpress.dmg"
  on:
    repo: etaletai13/gexpress
    tags: true
